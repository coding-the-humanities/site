<section class="block {{block.layout}}"
     id="{{block.id}}" 
     ui-sref-active="active" class="active" 
     ng-class="{selected: block.selected, 
     expanded:block.expanded}">
  <div ng-switch="block.layout">
                
    <header ng-switch-when="pilot"
            class="block-header">
      <a ng-show="!block.selected" 
         class="state-link"
         ng-click="toggleExpanded()"
         ng-href="{{block.url}}">

        <h1>{{ block.order }} - {{block.title | underscorize}}</h1>

      </a>
      <a ng-show="block.selected" 
         class="expansion-link"
         ng-click="toggleExpanded()">

        <h1>{{ block.order }} - {{block.title | underscorize}}</h1>

      </a>
    </header>

    <header ng-switch-default
            class="block-header">

      <a ng-show="!block.selected" 
         class="state-link"
         ng-click="toggleExpanded()"
         ng-href="{{block.url}}">

        <img ng-src="{{block.headerImage.url}}"/>

        <h1>{{block.title | underscorize}}</h1>

      </a>
      <a ng-show="block.selected" 
         class="expansion-link"
         ng-click="toggleExpanded()">
        <img ng-src="{{block.headerImage.url}}"/>

        <h1>{{block.title | underscorize}}</h1>

      </a>
    </header>

      <article ng-switch-when="pilot">
        <section class="content col-xs-10 col-xs-offset-1 col-md-8 col-md-offset-1 col-lg-6 col-lg-offset-2 csSlideUp">
          <block-content markdown="block.content"></block-content>
        </section>
      </article>

      <article ng-switch-default>
        <section class="content col-xs-10 col-xs-offset-1 col-md-8 col-md-offset-1 col-lg-6 col-lg-offset-2 csSlideUp">
          <div ng-bind-html="block.content | markdown"></div>
        </section>


        <section class="meta col-xs-12 col-md-2 col-md-offset-1 col-lg-2 col-lg-offset-2">
          <table class="table">
            <thead>
              <th>Meta</th>
            </thead>
            <tr ng-repeat="author in block.authors">
              <td>{{author}}</td>
            </tr>
          </table>
        </section>
      </article>

  </div>
</section>
